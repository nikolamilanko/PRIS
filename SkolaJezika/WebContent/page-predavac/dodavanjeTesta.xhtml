<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head></h:head>
<h:body>
	<h:form>
		<p:panelGrid columns="3">
			<p:outputLabel>Tip pitanja:</p:outputLabel>
			<p:selectOneMenu id="tipPitanja"
				value="#{testManagedBean.tipPitanja}">
				<f:selectItem itemLabel="-----select-----" itemValue="#{null}"
					noSelectionOption="true" selected="selected" />
				<f:selectItems value="#{testManagedBean.tipoviPitanja}" />
				<f:ajax render="forma1 and formaOabriaOdgovora" />
			</p:selectOneMenu>
		</p:panelGrid>
	</h:form>
	<h:form id="forma1">
		<ui:repeat var="value" value="#{testManagedBean.pitanja}">
			<p:panelGrid columns="2" rendered="#{testManagedBean.tipPitanja eq 'Odabir tacnih'}">
				<p:outputLabel>Tekst pitanja: </p:outputLabel>
				<h:inputText value="#{value.tekstpitanja}" />
			</p:panelGrid>
			<h:form id="formaOabriaOdgovora">
				<p:panelGrid columns="2"
					rendered="#{testManagedBean.tipPitanja eq 'Odabir tacnih'}">
					<ui:repeat var="odgovor"
						value="#{testManagedBean.tekstoviOdgovora}">
						<p:panelGrid columns="1">
							<p:outputPanel>Tekst odgovora:</p:outputPanel>
						</p:panelGrid>
					</ui:repeat>
					<ui:repeat var="odgovor"
						value="#{testManagedBean.tekstoviOdgovora}">
						<p:panelGrid columns="1">
							<p:inputText value="#{odgovor}"></p:inputText>
						</p:panelGrid>
					</ui:repeat>
					<p:commandButton value="Dodaj odgovor">
						<f:ajax listener="#{testManagedBean.dodajOdgovor()}"
							render="@form" />
					</p:commandButton>
				</p:panelGrid>
			</h:form>

		</ui:repeat>
		<h:commandButton action="#{testManagedBean.sacuvajIzmene()}"
			value="Sacuvaj" />
	</h:form>
</h:body>

</html>
